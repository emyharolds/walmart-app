version: 2

sources:
  - name: raw
    description: Raw Walmart data loaded from S3 via Snowflake COPY/PIPE
    database: "{{ env_var('DBT_SNOWFLAKE_DATABASE', 'WALM_DATA') }}"
    schema: raw
    tables:
      - name: department
        description: Department information for each store
        columns:
          - name: STORE
            description: Store identifier
            tests:
              - not_null
          - name: DEPT
            description: Department identifier
            tests:
              - not_null
          - name: DEPT_NAME
            description: Department name

      - name: stores
        description: Store characteristics and attributes
        columns:
          - name: STORE
            description: Store identifier
            tests:
              - not_null
              - unique
          - name: TYPE
            description: Store type (A, B, C)
          - name: SIZE
            description: Store size in square feet

      - name: fact
        description: Weekly sales facts for each store and department
        columns:
          - name: STORE
            description: Store identifier
            tests:
              - not_null
          - name: DEPT
            description: Department identifier
            tests:
              - not_null
          - name: DATE
            description: Week end date
            tests:
              - not_null
          - name: WEEKLY_SALES
            description: Weekly sales amount
          - name: ISHOLIDAY
            description: Holiday flag (TRUE/FALSE)
          - name: TEMPERATURE
            description: Average temperature
          - name: FUEL_PRICE
            description: Fuel price in the region
          - name: MARKDOWN1
            description: Anonymized markdown data
          - name: MARKDOWN2
            description: Anonymized markdown data
          - name: MARKDOWN3
            description: Anonymized markdown data
          - name: MARKDOWN4
            description: Anonymized markdown data
          - name: MARKDOWN5
            description: Anonymized markdown data
          - name: CPI
            description: Consumer Price Index
          - name: UNEMPLOYMENT
            description: Unemployment rate
