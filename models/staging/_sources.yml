version: 2

sources:
  - name: raw
    description: Raw Walmart data loaded from S3 via Snowflake COPY/PIPE
    database: "{{ env_var('DBT_SNOWFLAKE_DATABASE', 'WALM_DATA') }}"
    schema: raw
    tables:
      - name: department
        description: Department information for each store
        columns:
          - name: store
            description: Store identifier
            tests:
              - not_null
          - name: dept
            description: Department identifier
            tests:
              - not_null
          - name: dept_name
            description: Department name

      - name: stores
        description: Store characteristics and attributes
        columns:
          - name: store
            description: Store identifier
            tests:
              - not_null
              - unique
          - name: type
            description: Store type (A, B, C)
          - name: size
            description: Store size in square feet

      - name: fact
        description: Weekly sales facts for each store and department
        columns:
          - name: store
            description: Store identifier
            tests:
              - not_null
          - name: dept
            description: Department identifier
            tests:
              - not_null
          - name: date
            description: Week end date
            tests:
              - not_null
          - name: weekly_sales
            description: Weekly sales amount
          - name: isholiday
            description: Holiday flag (TRUE/FALSE)
          - name: temperature
            description: Average temperature
          - name: fuel_price
            description: Fuel price in the region
          - name: markdown1
            description: Anonymized markdown data
          - name: markdown2
            description: Anonymized markdown data
          - name: markdown3
            description: Anonymized markdown data
          - name: markdown4
            description: Anonymized markdown data
          - name: markdown5
            description: Anonymized markdown data
          - name: cpi
            description: Consumer Price Index
          - name: unemployment
            description: Unemployment rate
